<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Cvode_nvector" rel="Chapter" href="Cvode_nvector.html">
<link title="Cvode_serial" rel="Chapter" href="Cvode_serial.html"><title>Sundials (-CVODE)</title>
</head>
<body>
<center><h1>Sundials (-CVODE)</h1></center>
<a href="https://computation.llnl.gov/casc/sundials/main.html"> Sundials</a> is a
collection of five numerical solvers: CVODE,  CVODES, IDA, IDAS, KINSOL.
This library interfaces with Sundials version <b>2.4.0</b>. Sundials is written
by Radu Serban, Carol Woodward, and Alan Hindmarsh with the past
contributions of Peter Brown, Scott Cohen, Aaron Collier, Keith Grant,
Steven Lee, Dan Reynolds, Dan Shumaker, and Allan Taylor.
<p>

This Ocaml interface was written by <a href="http://www.tbrk.org"> Timothy Bourke</a>
of <a href="http://www.inria.fr"> INRIA</a> and <a href="http://www.di.ens.fr/~pouzet/"> Marc
Pouzet</a> of <a href="http://www.di.ens.fr/"> LIENS</a>.
<p>

This library provides an Ocaml interface to Sundials, though <b>only the
CVODE solver with serial nvectors is currently supported</b>.
The structure and naming conventions largely follow the original libraries,
both for ease of reading the existing documentation and for converting
existing source code, but several changes have been made for programming
convenience, namely:<ul>
<li>solver sessions are configured through algebraic data types rather than
  through multiple function calls,</li>
<li>error conditions are signalled by exceptions rather than return codes
  (including in user-supplied callback routines),</li>
<li>closures (partial applications of higher-order functions) are used to
  share user data between callback routines, and,</li>
<li>explicit free commands are not necessary nor provided since Ocaml is a
  garbage-collected language.</li>
</ul>

Function names have been renamed according to a regular scheme.
The leading <em>module identifier</em> is removed and replaced with a module
path.
The identifier is renamed by separating words that begin with an
uppercase letter in CVODEs by underscores, and only lowercase letters are
used.
For instance, <code class="code">CVodeSetErrHandlerFn</code>, becomes 
<code class="code">Cvode.set_err_handler_fn</code>, and <code class="code">CVSpilsSetJacTimesVecFn</code> becomes 
<code class="code">Cvode.Spils.set_jac_times_vec_fn</code>.
<p>

Constant have been replaced by variant types in most cases.
They have also been renamed by converting them to <em>CamlCase</em> and removing
underscores.
For instance, <code class="code">PREC_NONE</code> becomes <code class="code">Cvode.PrecNone</code>.
<p>

Rather than try to duplicate or replace the comprehensive
<a href="https://computation.llnl.gov/casc/sundials/documentation/documentation.html">
Sundials user manuals</a>, this documentation provides hyperlinks back to the original
function descriptions and focuses instead on differences between the
original library and the Ocaml interface.
Most of the single line descriptions of functions have, however, been taken
directly from the original manual written by Alan C. Hindmarsh and Radu
Serban of the <em>Center for Applied Scientific Computing, 
Lawrence Livermore National Laboratory</em>.
<p>

The top level <a href="Sundials.html"><code class="code">Sundials</code></a> module provides some utility routines for dealing
with arrays of floats and integers, and for accessing certain constants
(like <a href="Sundials.html#VALbig_real"><code class="code">Sundials.big_real</code></a> and <a href="Sundials.html#VALunit_roundoff"><code class="code">Sundials.unit_roundoff</code></a>).
<p>

<span id="nvector"><h2>Nvectors</h2></span>
<p>

Sundials defines an abstract interface for vectors and provides
implementations for serial and parallel vectors.
<b>Parallel vectors are not currently supported in this library.</b>
<p>

There are mechanisms for defining new vector implementations using records
of imperative (<a href="Nvector.Mutable.html"><code class="code">Nvector.Mutable</code></a>) or pure functions (<a href="Nvector.Immutable.html"><code class="code">Nvector.Immutable</code></a>).
A vector implementation for standard Ocaml arrays of floats is provided as
an example (<a href="Nvector_array.html"><code class="code">Nvector_array</code></a>).
<p>

Serial vectors are passed between Sundials and Ocaml programs as
Bigarrays.
These vectors are manipulated within the solver using the original low-level
vector operations (cloning, linear sums, adding constants, and etcetera).
While direct interfaces to these operations are not provided, there are
equivalent implementations written in Ocaml for arrays of floats
(<a href="Nvector_array.html"><code class="code">Nvector_array</code></a>) and bigarrays (<a href="Nvector_array.Bigarray.html"><code class="code">Nvector_array.Bigarray</code></a>) of floats.
<p>

<span id="cvode"><h2>CVODE</h2></span>
<p>

CVODE solves ODE initial value problems using a variable-step solver with
zero-crossing detection (root finding).
This library provides an interface to the entire CVODE library except for
functions related to parallel nvectors and custom linear solvers.
<p>

Two interfaces are provided, one for serial nvectors (<a href="Cvode_serial.html"><code class="code">Cvode_serial</code></a>) and
one for abstract nvectors (<a href="Cvode_nvector.html"><code class="code">Cvode_nvector</code></a>).
They are identical except for the type signatures, and one or two small
changes required to accomodate the polymorphic argument of the abstract
nvector type.
Serial nvectors have two advantages over abstract nvectors:<OL>
<li><em>efficiency</em>, since the low-level vector operations are implemented
directly in C (rather than as C stubs around Ocaml callbacks), and,</li>
<li><em>convenience</em>, since the interface is simpler and more direct.</li>
</OL>

Both interfaces directly include the <a href="Cvode.html"><code class="code">Cvode</code></a> module, which contains nvector
independent types and values, which in turn includes the <a href="Sundials.html"><code class="code">Sundials</code></a> module.
This flattening of the module structure intends to simplify working with the
library.
Each program need then only begin with a single aliasing definition, either:
<p>

<code class="code">module Cvode = Cvode_serial</code>
<p>

or:
<p>

<code class="code">module Cvode = Cvode_nvector</code>
<p>

<span id="usingcvode"><h3>Using the library</h3></span>
<p>

Skeletons of the main program are given under <a href="Cvode_serial.html#TYPEsession"><code class="code">Cvode_serial.session</code></a> and
<a href="Cvode_nvector.html#TYPEsession"><code class="code">Cvode_nvector.session</code></a>. Such a program can be compiled using the
<code class="code">-I +sundials</code> option and including <code class="code">unix.cma</code> (or <code class="code">.cmxa</code>),
<code class="code">bigarray.cma</code> (or <code class="code">.cmxa</code>) and <code class="code">sundials_cvode.cma</code> (or <code class="code">.cmxa</code>), for example:
<pre><code class="code">ocamlc -o myprogram -I +sundials unix.cma bigarray.cma sundials_cvode.cma myprogram.ml</code></pre>
or:
<pre><code class="code">ocamlopt -o myprogram -I +sundials unix.cmxa bigarray.cmxa sundials_cvode.cmxa myprogram.ml</code></pre>
<p>

<span id="modules"><h2>Modules</h2></span>
<p>

<br>
<table class="indextable">
<tr><td><a href="Sundials.html">Sundials</a></td><td><div class="info">
Generic definitions for the Sundials suite
</div>
</td></tr>
</table>

<br>
<table class="indextable">
<tr><td><a href="Nvector.html">Nvector</a></td><td><div class="info">
Define abstract NVectors using imperative or functional operations
</div>
</td></tr>
<tr><td><a href="Nvector_array.html">Nvector_array</a></td><td><div class="info">
<a href="Nvector.html#TYPEnvector"><code class="code">Nvector.nvector</code></a>s for standard arrays and one-dimensional bigarrays
</div>
</td></tr>
</table>

<br>
<table class="indextable">
<tr><td><a href="Cvode.html">Cvode</a></td><td><div class="info">
Vector-independent types and values for the CVODE solver.
</div>
</td></tr>
<tr><td><a href="Cvode_serial.html">Cvode_serial</a></td><td><div class="info">
Serial nvector interface to the CVODE solver.
</div>
</td></tr>
<tr><td><a href="Cvode_nvector.html">Cvode_nvector</a></td><td><div class="info">
Abstract nvector interface to the CVODE Solver
</div>
</td></tr>
</table>

<p>

<span id="refs"><h2>References</h2></span>
<p>
<ul>
<li>A. C. Hindmarsh, P. N. Brown, K. E. Grant, S. L. Lee, R. Serban, D. E.
Shumaker, and C. S. Woodward, "<b>SUNDIALS: Suite of Nonlinear and
Differential/Algebraic Equation Solvers</b>," ACM Transactions on Mathematical
Software, 31(3), pp. 363-396, 2005.</li>
</ul>

<span id="indexes"><h2>Indexes</h2></span>
<p>

<a href="index_types.html">Index of types</a><br>
<a href="index_exceptions.html">Index of exceptions</a><br>
<a href="index_values.html">Index of values</a><br>
<a href="index_modules.html">Index of modules</a><br>
<a href="index_module_types.html">Index of module types</a><br>
<br>
</body>
</html>