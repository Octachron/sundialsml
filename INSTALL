Ocaml interface to Sundials (-CVODE)
------------------------------------
------------------------------------

Timothy Bourke (INRIA) and Marc Pouzet (LIENS)
Released under a GPL2 license, see LICENSE.

Please send feedback and bug reports to tim@tbrk.org.

Requirements
------------
* Ocaml 3.12.0 or above.
* Sundials 2.4.0 (see below).
* Gnu Make
* C compiler and preprocesser (gcc recommended)

Compilation and Installation of Sundials
----------------------------------------
* Sundials can be downloaded from:
  https://computation.llnl.gov/casc/sundials/download/download.html

* Sundials can be built and installed using the standard instructions that
  come with it. We recommend also building and installing the examples (see
  additional notes in ./examples/sundials/README), and the shared libraries:

    ./configure CC=gcc F77=gfortran --enable-examples --enable-shared
    make

  Note that the Ocaml interface assumes 64-bit floats. This means that
  Sundials must be compiled so that realtype = double (i.e. ./configure
  -with-precision=double, which is anyway the default).

  The C compiler must use a 32-bit int type (or an exception will be thrown
  at runtime).

* The Lapack versions of the Dense (LapackDense) and banded (LapackBand)
  linear solvers require two things:

  1. That Sundials is built with the appropriate options, e.g.:
	--with-blas=SimTKlapack --with-lapack=SimTKlapack
     (replace SimTKlapack with the appropriate LAPACK library.)

  2. That the variable LAPACK_LIB in Makefile.inc is set to this library, e.g:
	LAPACK_LIB = -lSimTKlapack
     (otherwise exceptions will be thrown at compile time:
	 Error: Error on dynamically loaded library:
	 ../../dllmlsundials_cvode.so: /usr/local/lib/libsundials_cvode.so.1:
	 undefined symbol: dgbtrs_) 

Compilation and Installation of the library
-------------------------------------------

* Installation:

  1. Edit Makefile.inc if necessary (usually only for LAPACK_LIB, see above).

  2. make

  3. make install
     (This will create a directory called 'sundials' at the path returned by
      'ocamlc -where', and the various .cmi and library files will be copied
      into it. The dllmlsundials_cvode shared library will be copied into the
      stublibs subdirectory.)

  The library can be uninstalled with: make uninstall

* Documentation:
  
  The standard Sundials documentation remains the authoritative source:
  https://computation.llnl.gov/casc/sundials/documentation/documentation.html

  Some supplementary API documentation can also be built with:
	make doc

* Examples:

  The programs in examples/sundials can be used to test the Ocaml library
  against results from the standard Sundials examples. See the README file
  in that directory for further information

