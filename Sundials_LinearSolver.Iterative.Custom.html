<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="docstyle.css" type="text/css">
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script><script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="next" href="Sundials_LinearSolver.Iterative.Algorithms.html">
<link rel="Up" href="Sundials_LinearSolver.Iterative.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials_Index" rel="Chapter" href="Sundials_Index.html">
<link title="Sundials_Config" rel="Chapter" href="Sundials_Config.html">
<link title="Sundials_RealArray" rel="Chapter" href="Sundials_RealArray.html">
<link title="Sundials_RealArray2" rel="Chapter" href="Sundials_RealArray2.html">
<link title="Sundials_LintArray" rel="Chapter" href="Sundials_LintArray.html">
<link title="Sundials_Logfile" rel="Chapter" href="Sundials_Logfile.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Nvector_serial" rel="Chapter" href="Nvector_serial.html">
<link title="Sundials_Matrix" rel="Chapter" href="Sundials_Matrix.html">
<link title="Sundials_LinearSolver" rel="Chapter" href="Sundials_LinearSolver.html">
<link title="Nvector_custom" rel="Chapter" href="Nvector_custom.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Kinsol" rel="Chapter" href="Kinsol.html">
<link title="Ida" rel="Chapter" href="Ida.html">
<link title="Arkode" rel="Chapter" href="Arkode.html">
<link title="Cvodes" rel="Chapter" href="Cvodes.html">
<link title="Idas" rel="Chapter" href="Idas.html">
<link title="Nvector_parallel" rel="Chapter" href="Nvector_parallel.html">
<link title="Kinsol_bbd" rel="Chapter" href="Kinsol_bbd.html">
<link title="Arkode_bbd" rel="Chapter" href="Arkode_bbd.html">
<link title="Cvode_bbd" rel="Chapter" href="Cvode_bbd.html">
<link title="Cvodes_bbd" rel="Chapter" href="Cvodes_bbd.html">
<link title="Ida_bbd" rel="Chapter" href="Ida_bbd.html">
<link title="Idas_bbd" rel="Chapter" href="Idas_bbd.html">
<link title="Nvector_openmp" rel="Chapter" href="Nvector_openmp.html">
<link title="Nvector_pthreads" rel="Chapter" href="Nvector_pthreads.html"><title>Sundials/ML 3.1.1p0 : Sundials_LinearSolver.Iterative.Custom</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Sundials_LinearSolver.Iterative.html" title="Sundials_LinearSolver.Iterative">Up</a>
&nbsp;<a class="post" href="Sundials_LinearSolver.Iterative.Algorithms.html" title="Sundials_LinearSolver.Iterative.Algorithms">Next</a>
</div>
<h1>Module <a href="type_Sundials_LinearSolver.Iterative.Custom.html">Sundials_LinearSolver.Iterative.Custom</a></h1>

<pre><span id="MODULECustom"><span class="keyword">module</span> Custom</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Sundials_LinearSolver.Iterative.Custom.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
<div class="info-desc">
<p>Custom iterative linear solvers.</p>
</div>
</div>
<hr width="100%">

<pre><span id="TYPEtag"><span class="keyword">type</span> <code class="type">'lsolver</code> tag</span> = <code class="type">[ `Custom of 'lsolver ]</code> </pre>
<div class="info ">
<div class="info-desc">
<p>Used to distinguish custom linear solvers</p>
</div>
</div>


<pre><span id="TYPEatimesfn"><span class="keyword">type</span> <code class="type">('data, 'kind)</code> atimesfn</span> = <code class="type">('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>A function <code class="code">atimesfn&nbsp;v&nbsp;z</code> computes the action of the system
        matrix on the vector <code class="code">v</code>, storing the result in <code class="code">z</code>. The matrix is
        represented implicitly by the effect of the function.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONATimesFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">ATimesFailure</span></code></a>.</p>
</div>
</div>


<pre><span id="TYPEpsetupfn"><span class="keyword">type</span> <code class="type"></code>psetupfn</span> = <code class="type">unit -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>Functions that set up any problem data in preparation for calls to
      <code class="code">psolvefn</code>.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONPSetFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">PSetFailure</span></code></a>.</p>
</div>
</div>


<pre><span id="TYPEpsolvefn"><span class="keyword">type</span> <code class="type">('data, 'kind)</code> psolvefn</span> = <code class="type">('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> float -> bool -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>A function <code class="code">psolvefn&nbsp;r&nbsp;z&nbsp;tol&nbsp;lr</code> that solves the preconditioner
      equation $Pz = r$  for the vector <code class="code">z</code> such that
      $\left\lVert Pz - r \right\rVert_\mathrm{wrms} < \mathit{tol}$ .
      If <code class="code">lr</code> is <code class="code"><span class="keyword">true</span></code> then $P$  should be treated as a left
      preconditioner and otherwise as a right preconditioner.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONPSolveFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">PSolveFailure</span></code></a>.</p>
</div>
</div>


<pre><code><span id="TYPEops"><span class="keyword">type</span> <code class="type">('data, 'kind, 'lsolver)</code> ops</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.init">init</span>&nbsp;: <code class="type">'lsolver -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver initalization.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.setup">setup</span>&nbsp;: <code class="type">'lsolver -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver setup.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.solve">solve</span>&nbsp;: <code class="type">'lsolver -> 'data -> 'data -> float -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The call <code class="code">solve&nbsp;ls&nbsp;x&nbsp;b&nbsp;tol</code> should solve the linear system
        $Ax = b$  to within the weight 2-norm tolerance <code class="code">tol</code>.
        $A$  is only available indirectly via the <code class="code">atimes</code> function.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_atimes">set_atimes</span>&nbsp;: <code class="type">('lsolver -><br>        ('data, 'kind) <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEatimesfn">atimesfn</a> -> unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Provides the linear solver with a problem-specific <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEatimesfn"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">Iterative</span>.<span class="constructor">Custom</span>.atimesfn</code></a>.
          The given function may only be used within <code class="code">init</code>, <code class="code">setup</code>,
          and <code class="code">solve</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_preconditioner">set_preconditioner</span>&nbsp;: <code class="type">('lsolver -><br>        <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEpsetupfn">psetupfn</a> option -><br>        ('data, 'kind) <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEpsolvefn">psolvefn</a> option -><br>        unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Provides the linear solver with preconditioner routines.
          The given functions may only be used within <code class="code">init</code>, <code class="code">setup</code>,
          and <code class="code">solve</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_scaling_vectors">set_scaling_vectors</span>&nbsp;: <code class="type">('lsolver -> 'data option -> 'data option -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Passes the left/right scaling vectors for use in <code class="code">solve</code>.
        The call <code class="code">set_scaling_vectors&nbsp;ls&nbsp;s1&nbsp;s2</code> provides diagonal matrices
        of scale factors for solving the system
        $\tilde{A}\tilde{x} = \tilde{b}$ 
        where
        $\tilde{A} = S_1 P_1^{-1} A P_2^{-1} S_2^{-1}$ ,
        $\tilde{b} = S_1 P_1^{-1} b$ , and
        $\tilde{x} = S_2 P_2 x$ .
        A <code class="code"><span class="constructor">None</span></code> argument indicates an identity scaling matrix.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_num_iters">get_num_iters</span>&nbsp;: <code class="type">('lsolver -> int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The number of linear iterations performed in the last
       <code class="code">solve</code> call.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_res_norm">get_res_norm</span>&nbsp;: <code class="type">('lsolver -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The final residual norm from the last <code class="code">solve</code> call.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_res_id">get_res_id</span>&nbsp;: <code class="type">('lsolver -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a>) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The preconditioned initial residual vector. This vector may be
        requested if the iterative method computes the preconditioned
        initial residual and returns from <code class="code">solve</code> successfully without
        performing any iterations (i.e., either the initial guess or the
        preconditioner is sufficiently accurate).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_work_space">get_work_space</span>&nbsp;: <code class="type">('lsolver -> int * int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Return the storage requirements for the linear solver.
        The result <code class="code">(lrw,&nbsp;liw)</code> gives the number of words used for
        storing real values (<code class="code">lrw</code>) and the number of words used
        for storing integer values (<code class="code">liw</code>). *</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
}

<div class="info ">
<div class="info-desc">
<p>The operations required to implement an iterative linear solver.
      Failure should be indicated by raising an exception (preferably
      one of the exceptions in this package). Raising
      <a href="Sundials.html#EXCEPTIONRecoverableFailure"><code class="code"><span class="constructor">Sundials</span>.<span class="constructor">RecoverableFailure</span></code></a> indicates a generic
      recoverable failure.</p>
</div>
</div>


<pre><span id="VALmake"><span class="keyword">val</span> make</span> : <code class="type">('data, 'kind, 'lsolver) <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEops">ops</a> -><br>       'lsolver -><br>       ('data, 'kind, 'lsolver <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEtag">tag</a>)<br>       <a href="Sundials_LinearSolver.Iterative.html#TYPElinear_solver">Sundials_LinearSolver.Iterative.linear_solver</a></code></pre><div class="info ">
<div class="info-desc">
<p>Create an iterative linear solver given a set of operations and an
      internal state.</p>

<p>NB: This feature is only available for
          <a href="Sundials_Config.html#VALsundials_version">Config.sundials_version</a> &gt;= 3.0.0.</p>
</div>
</div>

<pre><span id="VALunwrap"><span class="keyword">val</span> unwrap</span> : <code class="type">('data, 'kind, 'lsolver <a href="Sundials_LinearSolver.Iterative.Custom.html#TYPEtag">tag</a>)<br>       <a href="Sundials_LinearSolver.Iterative.html#TYPElinear_solver">Sundials_LinearSolver.Iterative.linear_solver</a> -> 'lsolver</code></pre><div class="info ">
<div class="info-desc">
<p>Return the internal state from an custom iterative linear solver.</p>
</div>
</div>
</body></html>
