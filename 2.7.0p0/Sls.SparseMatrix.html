<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="docstyle.css" type="text/css">
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script><script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="Up" href="Sls.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Dls" rel="Chapter" href="Dls.html">
<link title="Sls" rel="Chapter" href="Sls.html">
<link title="Spils" rel="Chapter" href="Spils.html">
<link title="Nvector_custom" rel="Chapter" href="Nvector_custom.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Nvector_serial" rel="Chapter" href="Nvector_serial.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Kinsol" rel="Chapter" href="Kinsol.html">
<link title="Ida" rel="Chapter" href="Ida.html">
<link title="Arkode" rel="Chapter" href="Arkode.html">
<link title="Cvodes" rel="Chapter" href="Cvodes.html">
<link title="Idas" rel="Chapter" href="Idas.html">
<link title="Nvector_parallel" rel="Chapter" href="Nvector_parallel.html">
<link title="Kinsol_bbd" rel="Chapter" href="Kinsol_bbd.html">
<link title="Arkode_bbd" rel="Chapter" href="Arkode_bbd.html">
<link title="Cvode_bbd" rel="Chapter" href="Cvode_bbd.html">
<link title="Cvodes_bbd" rel="Chapter" href="Cvodes_bbd.html">
<link title="Ida_bbd" rel="Chapter" href="Ida_bbd.html">
<link title="Idas_bbd" rel="Chapter" href="Idas_bbd.html">
<link title="Nvector_openmp" rel="Chapter" href="Nvector_openmp.html">
<link title="Nvector_pthreads" rel="Chapter" href="Nvector_pthreads.html"><link title="Basic access" rel="Section" href="#4_Basicaccess">
<link title="Calculations" rel="Section" href="#4_Calculations">
<link title="Low-level details" rel="Section" href="#4_Lowleveldetails">
<title>Sundials/ML 2.7.0p0 : Sls.SparseMatrix</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Sls.html" title="Sls">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Sls.SparseMatrix.html">Sls.SparseMatrix</a></h1>

<pre><span class="keyword">module</span> SparseMatrix: <code class="code"><span class="keyword">sig</span></code> <a href="Sls.SparseMatrix.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Sparse matrices as passed to callback functions.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>The SLS Module</div></div>
<hr width="100%">

<pre><span id="TYPEcsc"><span class="keyword">type</span> <code class="type"></code>csc</span> </pre>


<pre><span id="TYPEcsr"><span class="keyword">type</span> <code class="type"></code>csr</span> </pre>


<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">'sformat</code> t</span> = <code class="type">'sformat Sls_impl.t</code> </pre>
<div class="info ">
A sparse matrix. Values of this type are passed
        to linear solver callback functions, in which
        case their lifetimes are determined by the underlying library and they
        should only be used within the callback to avoid the
        <a href="Sls.SparseMatrix.html#EXCEPTIONInvalidated">Invalidated</a> exception.
<p>

        The type argument <code class="code"><span class="keywordsign">'</span>sformat</code> specifies the storage format.
        It is either <a href="Sls.SparseMatrix.html#TYPEcsc"><code class="code"><span class="constructor">Sls</span>.<span class="constructor">SparseMatrix</span>.csc</code></a> or <a href="Sls.SparseMatrix.html#TYPEcsr"><code class="code"><span class="constructor">Sls</span>.<span class="constructor">SparseMatrix</span>.csr</code></a>.<br>
<div class="sundials"><span class="seesundials">See sundials: </span> Type SlsMat</div></div>


<pre><span id="TYPEt_csc"><span class="keyword">type</span> <code class="type"></code>t_csc</span> = <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code> </pre>


<pre><span id="TYPEt_csr"><span class="keyword">type</span> <code class="type"></code>t_csr</span> = <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code> </pre>

<br>
<h4 id="4_Basicaccess">Basic access</h4><br>

<pre><span id="VALmake_csc"><span class="keyword">val</span> make_csc</span> : <code class="type">int -> int -> int -> <a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">make m n nnz</code> returns an <code class="code">m</code> by <code class="code">n</code> sparse matrix in
        compressed-sparse-column format with a potential
        for <code class="code">nnz</code> non-zero elements. All elements are initially zero.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseNewMat</div></div>

<pre><span id="VALcreate_csc"><span class="keyword">val</span> create_csc</span> : <code class="type">int -> int -> int -> <a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">create m n nnz</code> returns an uninitialized <code class="code">m</code> by <code class="code">n</code> sparse matrix
        in compressed-sparse-column format with a potential for <code class="code">nnz</code>
        non-zero elements.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:sparse">SparseNewMat</a></div></div>

<pre><span id="VALmake_csr"><span class="keyword">val</span> make_csr</span> : <code class="type">int -> int -> int -> <a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">make m n nnz</code> returns an <code class="code">m</code> by <code class="code">n</code> sparse matrix in
        compressed-sparse-row format with a potential
        for <code class="code">nnz</code> non-zero elements. All elements are initially zero.<br>
<b>Since</b> 2.7.0<br>
<div class="raisedexceptions"><span class="raises">Raises</span> <code>Sundials.NotImplementedBySundialsVersion</code> CSR format not available.</div>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseNewMat</div></div>

<pre><span id="VALcreate_csr"><span class="keyword">val</span> create_csr</span> : <code class="type">int -> int -> int -> <a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">create m n nnz</code> returns an uninitialized <code class="code">m</code> by <code class="code">n</code> sparse matrix in
        compressed-sparse-row format with a potential for <code class="code">nnz</code> non-zero
        elements.<br>
<b>Since</b> 2.7.0<br>
<div class="raisedexceptions"><span class="raises">Raises</span> <code>Sundials.NotImplementedBySundialsVersion</code> CSR format not available.</div>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:sparse">SparseNewMat</a></div></div>

<pre><span id="VALsize"><span class="keyword">val</span> size</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int * int * int</code></pre><div class="info ">
<code class="code">m, n, nnz = size a</code> returns the numbers of columns <code class="code">m</code>, rows <code class="code">n</code>, and
        the maximum number of non-zero elements of <code class="code">a</code>.<br>
</div>

<pre><span id="VALprint"><span class="keyword">val</span> print</span> : <code class="type"><a href="Sundials.Logfile.html#TYPEt">Sundials.Logfile.t</a> -> 'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Prints a sparse matrix to stdout.
<p>

        In versions of Sundials prior to 2.7.0, the only valid log file
        is .<br>
<div class="raisedexceptions"><span class="raises">Raises</span> <code>Sundials.NotImplementedBySundialsVersion</code> log file not supported.</div>
<div class="sundials"><span class="seesundials">See sundials: </span>SparsePrintMat</div></div>

<pre><span id="VALpp"><span class="keyword">val</span> pp</span> : <code class="type">Format.formatter -> 'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Pretty-print a sparse matrix using the
        <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html"> Format</a> module.<br>
</div>

<pre><span id="VALcsc_from_dense"><span class="keyword">val</span> csc_from_dense</span> : <code class="type"><a href="Dls.DenseMatrix.html#TYPEt">Dls.DenseMatrix.t</a> -> <a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Create a compressed-sparse-column matrix from a dense one.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseFromDenseMat</div></div>

<pre><span id="VALcsr_from_dense"><span class="keyword">val</span> csr_from_dense</span> : <code class="type"><a href="Dls.DenseMatrix.html#TYPEt">Dls.DenseMatrix.t</a> -> <a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Create a compressed-sparse-row matrix from a dense one.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseFromDenseMat</div></div>

<pre><span id="VALcsc_from_band"><span class="keyword">val</span> csc_from_band</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">Dls.BandMatrix.t</a> -> <a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Create a sparse matrix from a banded one.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseFromDenseMat</div></div>

<pre><span id="VALcsr_from_band"><span class="keyword">val</span> csr_from_band</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">Dls.BandMatrix.t</a> -> <a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Create a sparse matrix from a banded one.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseFromDenseMat</div></div>

<pre><span id="VALset_col"><span class="keyword">val</span> set_col</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info ">
<code class="code">set_col a j idx</code> sets the data index of column <code class="code">j</code> to <code class="code">idx</code>.<br>
</div>

<pre><span id="VALget_col"><span class="keyword">val</span> get_col</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int</code></pre><div class="info ">
<code class="code">get_col a j</code> returns the data index of column <code class="code">j</code>.<br>
</div>

<pre><span id="VALset_row"><span class="keyword">val</span> set_row</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info ">
<code class="code">set_row a j idx</code> sets the data index of row <code class="code">j</code> to <code class="code">idx</code>.<br>
</div>

<pre><span id="VALget_row"><span class="keyword">val</span> get_row</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int</code></pre><div class="info ">
<code class="code">get_row a j</code> returns the data index of row <code class="code">j</code>.<br>
</div>

<pre><span id="VALset"><span class="keyword">val</span> set</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int -> float -> unit</code></pre><div class="info ">
<code class="code">set a idx i v</code> sets the <code class="code">idx</code>th row/column to <code class="code">i</code> and its value
        to <code class="code">v</code>.<br>
</div>

<pre><span id="VALget"><span class="keyword">val</span> get</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int * float</code></pre><div class="info ">
<code class="code">r, v = get a idx</code> returns the row/column <code class="code">r</code> and value <code class="code">v</code> at the
        <code class="code">idx</code>th position.<br>
</div>

<pre><span id="VALset_to_zero"><span class="keyword">val</span> set_to_zero</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Fills a matrix with zeros.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseSetMatToZero</div></div>

<pre><span id="VALrealloc"><span class="keyword">val</span> realloc</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> unit</code></pre><div class="info ">
Reallocates enoughs space for the given number of non-zero values.<br>
</div>
<br>
<h4 id="4_Calculations">Calculations</h4><br>

<pre><span id="VALadd_identity"><span class="keyword">val</span> add_identity</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Increments a square matrix by the identity matrix.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseAddIdentityMat</div></div>

<pre><span id="VALblit"><span class="keyword">val</span> blit</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> 'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<code class="code">blit src dst</code> copies the contents of <code class="code">src</code> into <code class="code">dst</code>.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseCopyMat</div></div>

<pre><span id="VALscale"><span class="keyword">val</span> scale</span> : <code class="type">float -> 'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Multiplies each element by a constant.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseScaleMat</div></div>

<pre><span id="VALadd"><span class="keyword">val</span> add</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> 'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Adds two matrices.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseAddMat</div></div>

<pre><span id="VALmatvec"><span class="keyword">val</span> matvec</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> <a href="Sundials.RealArray.html#TYPEt">Sundials.RealArray.t</a> -> <a href="Sundials.RealArray.html#TYPEt">Sundials.RealArray.t</a> -> unit</code></pre><div class="info ">
<code class="code">matvec a x y</code> computes the matrix-vector product <code class="code">y = <span class="constructor">A</span>*x</code>.
        If <code class="code">a</code> has dimensions <code class="code">m</code> by <code class="code">n</code>, then <code class="code">x</code> must be of size <code class="code">n</code>,
        and <code class="code">y</code> must be of size <code class="code">m</code>.<br>
<div class="sundials"><span class="seesundials">See sundials: </span>SparseMatvec</div></div>
<br>
<h4 id="4_Lowleveldetails">Low-level details</h4><br>

<pre><span id="VALset_rowval"><span class="keyword">val</span> set_rowval</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info ">
<code class="code">set_rowval a idx i</code> sets the <code class="code">idx</code>th row to <code class="code">i</code>.<br>
</div>

<pre><span id="VALget_rowval"><span class="keyword">val</span> get_rowval</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsc">csc</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int</code></pre><div class="info ">
<code class="code">r = get_rowval a idx</code> returns the row <code class="code">r</code> at the <code class="code">idx</code>th position.<br>
</div>

<pre><span id="VALset_colval"><span class="keyword">val</span> set_colval</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info ">
<code class="code">set_colval a idx i</code> sets the <code class="code">idx</code>th column to <code class="code">i</code>.<br>
</div>

<pre><span id="VALget_colval"><span class="keyword">val</span> get_colval</span> : <code class="type"><a href="Sls.SparseMatrix.html#TYPEcsr">csr</a> <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> int</code></pre><div class="info ">
<code class="code">c = get_colval a idx</code> returns the column <code class="code">c</code> at the <code class="code">idx</code>th
        position.<br>
</div>

<pre><span id="VALset_data"><span class="keyword">val</span> set_data</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> float -> unit</code></pre><div class="info ">
<code class="code">set_data a idx v</code> sets the value of the <code class="code">idx</code>th row <code class="code">v</code>.<br>
</div>

<pre><span id="VALget_data"><span class="keyword">val</span> get_data</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> int -> float</code></pre><div class="info ">
<code class="code">v = get_data a idx</code> returns the value <code class="code">v</code> at the <code class="code">idx</code>th position.<br>
</div>

<pre><span id="EXCEPTIONInvalidated"><span class="keyword">exception</span> Invalidated</span></pre>
<div class="info ">
Raised on an attempt to access a value that has become invalid. Such
        values refer to matrices that no longer exist in the underlying
        library.<br>
</div>

<pre><span id="VALinvalidate"><span class="keyword">val</span> invalidate</span> : <code class="type">'f <a href="Sls.SparseMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Called internally when the corresponding value in the underlying
        library ceases to exist.<br>
</div>
</body></html>